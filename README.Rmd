---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "80%"
)
```

# intervalpsych

<!-- badges: start -->
<!-- badges: end -->

The goal of intervalpsych is to help you with the analysis of interval responses.

## Installation

You can install the latest version of intervalpsych from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("matthiaskloft/intervalpsych")
```


# Fit the Interval Truth Model to the Verbal Quantifiers Dataset

First, we load the verbal quantifiers dataset:
```{r}
library(intervalpsych)

data(quantifiers)
head(quantifiers)
```


First, we need to convert the interval responses to the simplex format:

```{r}
quantifiers <- cbind(
  quantifiers, 
  itvl_to_splx(quantifiers[,c("x_L","x_U")], min = quantifiers$scale_min, max = quantifiers$scale_max)) |> 
  na.omit()

head(quantifiers[,9:13])
```


Let's check if we can apply the Isometric Log-Ratio transformation:
```{r}
try(ilr(quantifiers[,c("x_1","x_2","x_3")]))
```

It seems we have components in our simplex data that are zero. So we first have
to deal with these zero components. We can do this by adding a padding constant:

```{r}
quantifiers[, c("x_1", "x_2", "x_3")] <- 
  remove_zeros(quantifiers[, c("x_1", "x_2", "x_3")], padding = 0.01)

head(quantifiers[,9:13])
```

```{r}
fit_itm <-
  fit_itm(
    df_simplex = df,
    id_person = quantifiers$id_person,
    id_item = quantifiers$id_item,
    n_chains = 2,
    n_cores = 2,
    iter_sampling = 500,
    iter_warmup = 500
  )
```












