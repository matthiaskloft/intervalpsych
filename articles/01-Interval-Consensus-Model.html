<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Interval Consensus Model • intervalpsych</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Interval Consensus Model">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">intervalpsych</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/01-Interval-Consensus-Model.html">Interval Consensus Model</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/matthiaskloft/intervalpsych/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Interval Consensus Model</h1>
            <h3 data-toc-skip class="subtitle">Estimation of Weighted
Consensus Intervals for Interval Ratings</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/matthiaskloft/intervalpsych/blob/main/vignettes/01-Interval-Consensus-Model.Rmd" class="external-link"><code>vignettes/01-Interval-Consensus-Model.Rmd</code></a></small>
      <div class="d-none name"><code>01-Interval-Consensus-Model.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://matthiaskloft.github.io/intervalpsych/">intervalpsych</a></span><span class="op">)</span></span></code></pre></div>
<p>We want to fit the Interval Consensus Model to the Verbal Quantifiers
dataset.</p>
<p>First, we load the verbal quantifiers dataset:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">packages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"kableExtra"</span><span class="op">)</span></span>
<span><span class="co"># load packages and install if not available</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">pkg</span> <span class="kw">in</span> <span class="va">packages</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="va">pkg</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">pkg</span>, character.only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">quantifiers</span><span class="op">)</span></span>
<span></span>
<span><span class="va">quantifiers</span> <span class="op">&lt;-</span> <span class="va">quantifiers</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># exclude control items</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">name_en</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"always"</span>, <span class="st">"never"</span>, <span class="st">"fifty-fifty chance"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># sample 100 respondents</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">id_person</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span></span>
<span>    size <span class="op">=</span> <span class="fl">30</span>,</span>
<span>    replace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">quantifiers</span><span class="op">$</span><span class="va">id_person</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># exclude missing values</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x_L</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x_U</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># recompute IDs</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    id_person <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">id_person</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    id_item <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">id_item</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">quantifiers</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable_styling</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
id_person
</th>
<th style="text-align:right;">
id_item
</th>
<th style="text-align:left;">
name_ger
</th>
<th style="text-align:left;">
name_en
</th>
<th style="text-align:right;">
truth
</th>
<th style="text-align:right;">
scale_min
</th>
<th style="text-align:right;">
scale_max
</th>
<th style="text-align:right;">
width_min
</th>
<th style="text-align:right;">
x_L
</th>
<th style="text-align:right;">
x_U
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ab und zu
</td>
<td style="text-align:left;">
now and then
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
35
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
eventuell
</td>
<td style="text-align:left;">
possibly
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
fast immer
</td>
<td style="text-align:left;">
almost always
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
99
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
fast nie
</td>
<td style="text-align:left;">
almost never
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
gelegentlich
</td>
<td style="text-align:left;">
occasionally
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
haeufig
</td>
<td style="text-align:left;">
frequently
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
93
</td>
</tr>
</tbody>
</table>
<p>What does the dataset look like? We can visualize the interval
responses using the <code>plot_intervals_cumulative</code> function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_intervals_cumulative.html">plot_intervals_cumulative</a></span><span class="op">(</span></span>
<span>  lower <span class="op">=</span> <span class="va">quantifiers</span><span class="op">$</span><span class="va">x_L</span>,</span>
<span>  upper <span class="op">=</span> <span class="va">quantifiers</span><span class="op">$</span><span class="va">x_U</span>,</span>
<span>  min <span class="op">=</span> <span class="va">quantifiers</span><span class="op">$</span><span class="va">scale_min</span>,</span>
<span>  max <span class="op">=</span> <span class="va">quantifiers</span><span class="op">$</span><span class="va">scale_max</span>,</span>
<span>  cluster_id <span class="op">=</span> <span class="va">quantifiers</span><span class="op">$</span><span class="va">name_en</span>,</span>
<span>  weighted <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 390000 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_vline()`).</span></span></code></pre></div>
<p><img src="../reference/figures/README-unnamed-chunk-3-1.png" alt="Cumulative distribution of interval responses." width="90%"></p>
<p>Next, we need to convert the interval responses to the simplex
format:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quantifiers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>  <span class="va">quantifiers</span>, </span>
<span>  <span class="fu"><a href="../reference/itvl_to_splx.html">itvl_to_splx</a></span><span class="op">(</span><span class="va">quantifiers</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x_L"</span>,<span class="st">"x_U"</span><span class="op">)</span><span class="op">]</span>, min <span class="op">=</span> <span class="va">quantifiers</span><span class="op">$</span><span class="va">scale_min</span>, max <span class="op">=</span> <span class="va">quantifiers</span><span class="op">$</span><span class="va">scale_max</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">quantifiers</span><span class="op">[</span>,<span class="fl">9</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable_styling</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
x_L
</th>
<th style="text-align:right;">
x_U
</th>
<th style="text-align:right;">
x_1
</th>
<th style="text-align:right;">
x_2
</th>
<th style="text-align:right;">
x_3
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
0.28
</td>
<td style="text-align:right;">
0.07
</td>
<td style="text-align:right;">
0.65
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
0.10
</td>
<td style="text-align:right;">
0.14
</td>
<td style="text-align:right;">
0.76
</td>
</tr>
<tr>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
99
</td>
<td style="text-align:right;">
0.93
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
0.01
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
0.19
</td>
<td style="text-align:right;">
0.80
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
0.19
</td>
<td style="text-align:right;">
0.21
</td>
<td style="text-align:right;">
0.60
</td>
</tr>
<tr>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
0.76
</td>
<td style="text-align:right;">
0.17
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
</tbody>
</table>
<p>Let’s check if we can apply the Isometric Log-Ratio
transformation:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="../reference/log_ratio_transformations.html">ilr</a></span><span class="op">(</span><span class="va">quantifiers</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x_1"</span>,<span class="st">"x_2"</span>,<span class="st">"x_3"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in check_simplex(simplex[i, ]) : </span></span>
<span><span class="co">#&gt;   Error: None of the elements in the (row-)vector must be exactly 0! Please apply padding first!</span></span></code></pre></div>
<p>It seems we have components in our simplex data that are zero. So we
first have to deal with these zero components. We can do this by adding
a padding constant:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quantifiers</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x_1"</span>, <span class="st">"x_2"</span>, <span class="st">"x_3"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/remove_zeros.html">remove_zeros</a></span><span class="op">(</span><span class="va">quantifiers</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x_1"</span>, <span class="st">"x_2"</span>, <span class="st">"x_3"</span><span class="op">)</span><span class="op">]</span>, padding <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">quantifiers</span><span class="op">[</span>,<span class="fl">9</span><span class="op">:</span><span class="fl">13</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable_styling</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
x_L
</th>
<th style="text-align:right;">
x_U
</th>
<th style="text-align:right;">
x_1
</th>
<th style="text-align:right;">
x_2
</th>
<th style="text-align:right;">
x_3
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
0.28
</td>
<td style="text-align:right;">
0.08
</td>
<td style="text-align:right;">
0.64
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
0.11
</td>
<td style="text-align:right;">
0.15
</td>
<td style="text-align:right;">
0.75
</td>
</tr>
<tr>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
99
</td>
<td style="text-align:right;">
0.91
</td>
<td style="text-align:right;">
0.07
</td>
<td style="text-align:right;">
0.02
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
0.19
</td>
<td style="text-align:right;">
0.79
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
0.19
</td>
<td style="text-align:right;">
0.21
</td>
<td style="text-align:right;">
0.59
</td>
</tr>
<tr>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
0.75
</td>
<td style="text-align:right;">
0.17
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/fit_icm.html">fit_icm</a></span><span class="op">(</span></span>
<span>    df_simplex <span class="op">=</span> <span class="va">quantifiers</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x_1"</span>, <span class="st">"x_2"</span>, <span class="st">"x_3"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    id_person <span class="op">=</span> <span class="va">quantifiers</span><span class="op">$</span><span class="va">id_person</span>,</span>
<span>    id_item <span class="op">=</span> <span class="va">quantifiers</span><span class="op">$</span><span class="va">id_item</span>,</span>
<span>    item_labels <span class="op">=</span> <span class="va">quantifiers</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">id_item</span>, <span class="va">name_en</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">name_en</span><span class="op">)</span>,</span>
<span>    link <span class="op">=</span> <span class="st">"ilr"</span>,</span>
<span>    padding <span class="op">=</span> <span class="fl">.01</span>,</span>
<span>    n_chains <span class="op">=</span> <span class="fl">4</span>,</span>
<span>    n_cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    iter_sampling <span class="op">=</span> <span class="fl">500</span>,</span>
<span>    iter_warmup <span class="op">=</span> <span class="fl">300</span>,</span>
<span>    adapt_delta <span class="op">=</span> <span class="fl">.9</span>,</span>
<span>    refresh <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; CHECKING DATA AND PREPROCESSING FOR MODEL 'icm_ilr' NOW.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; COMPILING MODEL 'icm_ilr' NOW.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; STARTING SAMPLER FOR MODEL 'icm_ilr' NOW.</span></span>
<span><span class="co">#&gt; Warning in validityMethod(object): The following variables have undefined</span></span>
<span><span class="co">#&gt; values: Y_ppc_splx[264,2],The following variables have undefined values:</span></span>
<span><span class="co">#&gt; Y_ppc_loc_splx[264],The following variables have undefined values:</span></span>
<span><span class="co">#&gt; Y_ppc_wid_splx[264]. Many subsequent functions will not work correctly.</span></span>
<span><span class="co">#&gt; Warning: Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.</span></span>
<span><span class="co">#&gt; Running the chains for more iterations may help. See</span></span>
<span><span class="co">#&gt; https://mc-stan.org/misc/warnings.html#bulk-ess</span></span></code></pre></div>
<p>Now we can extract the estimated cosensus intervals from the fit
object. The function returns a list containing the posterior samples and
a summary table of the consensus intervals stemming from the posterior
medians.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">consensus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_consensus.html">extract_consensus</a></span><span class="op">(</span><span class="va">fit</span>, print_summary <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">consensus</span><span class="op">)</span></span>
<span><span class="co">#&gt; $names</span></span>
<span><span class="co">#&gt; [1] "df_rvar" "summary"</span></span></code></pre></div>
<p>If we want to get a summary of the consensus intervals, we can use
the <code>summary</code> function, which is a wrapper function around
<code>extract_consensus</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable_styling</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
T_L_median
</th>
<th style="text-align:right;">
T_L_CI_025
</th>
<th style="text-align:right;">
T_L_CI_975
</th>
<th style="text-align:right;">
T_U_median
</th>
<th style="text-align:right;">
T_U_CI_025
</th>
<th style="text-align:right;">
T_U_CI_975
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
now and then
</td>
<td style="text-align:right;">
0.17
</td>
<td style="text-align:right;">
0.13
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.39
</td>
<td style="text-align:right;">
0.33
</td>
<td style="text-align:right;">
0.45
</td>
</tr>
<tr>
<td style="text-align:left;">
possibly
</td>
<td style="text-align:right;">
0.15
</td>
<td style="text-align:right;">
0.10
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
0.43
</td>
<td style="text-align:right;">
0.34
</td>
<td style="text-align:right;">
0.53
</td>
</tr>
<tr>
<td style="text-align:left;">
almost always
</td>
<td style="text-align:right;">
0.86
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
0.89
</td>
<td style="text-align:right;">
0.98
</td>
<td style="text-align:right;">
0.97
</td>
<td style="text-align:right;">
0.99
</td>
</tr>
<tr>
<td style="text-align:left;">
almost never
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
0.10
</td>
<td style="text-align:right;">
0.08
</td>
<td style="text-align:right;">
0.14
</td>
</tr>
<tr>
<td style="text-align:left;">
occasionally
</td>
<td style="text-align:right;">
0.15
</td>
<td style="text-align:right;">
0.12
</td>
<td style="text-align:right;">
0.19
</td>
<td style="text-align:right;">
0.39
</td>
<td style="text-align:right;">
0.32
</td>
<td style="text-align:right;">
0.48
</td>
</tr>
<tr>
<td style="text-align:left;">
frequently
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
0.61
</td>
<td style="text-align:right;">
0.69
</td>
<td style="text-align:right;">
0.92
</td>
<td style="text-align:right;">
0.89
</td>
<td style="text-align:right;">
0.94
</td>
</tr>
<tr>
<td style="text-align:left;">
hardly
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
0.17
</td>
<td style="text-align:right;">
0.14
</td>
<td style="text-align:right;">
0.21
</td>
</tr>
<tr>
<td style="text-align:left;">
sometimes
</td>
<td style="text-align:right;">
0.23
</td>
<td style="text-align:right;">
0.17
</td>
<td style="text-align:right;">
0.29
</td>
<td style="text-align:right;">
0.48
</td>
<td style="text-align:right;">
0.41
</td>
<td style="text-align:right;">
0.55
</td>
</tr>
<tr>
<td style="text-align:left;">
most of the time
</td>
<td style="text-align:right;">
0.71
</td>
<td style="text-align:right;">
0.67
</td>
<td style="text-align:right;">
0.76
</td>
<td style="text-align:right;">
0.93
</td>
<td style="text-align:right;">
0.90
</td>
<td style="text-align:right;">
0.95
</td>
</tr>
<tr>
<td style="text-align:left;">
often
</td>
<td style="text-align:right;">
0.67
</td>
<td style="text-align:right;">
0.61
</td>
<td style="text-align:right;">
0.73
</td>
<td style="text-align:right;">
0.89
</td>
<td style="text-align:right;">
0.85
</td>
<td style="text-align:right;">
0.93
</td>
</tr>
<tr>
<td style="text-align:left;">
potentially
</td>
<td style="text-align:right;">
0.32
</td>
<td style="text-align:right;">
0.24
</td>
<td style="text-align:right;">
0.41
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:right;">
0.53
</td>
<td style="text-align:right;">
0.75
</td>
</tr>
<tr>
<td style="text-align:left;">
rarely
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
0.18
</td>
<td style="text-align:right;">
0.14
</td>
<td style="text-align:right;">
0.22
</td>
</tr>
<tr>
<td style="text-align:left;">
constantly
</td>
<td style="text-align:right;">
0.78
</td>
<td style="text-align:right;">
0.73
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
0.98
</td>
<td style="text-align:right;">
0.96
</td>
<td style="text-align:right;">
0.99
</td>
</tr>
</tbody>
</table>
<p>We can also plot the estimated consensus intervals. The generic
function <code>plot</code> calls the function
<code>plot_consensus</code> with the default method
<code>median_bounds</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span>, method <span class="op">=</span> <span class="st">"median_bounds"</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/README-unnamed-chunk-10-1.png" alt="Plot of the estimated consensus intervals." width="90%"></p>
<p>We can call the function <code>plot_consensus</code> directly for the
alternative plotting method <code>draws_distribution</code>, which plots
the consensus intervals based on the posterior draws. For every
posterior draw, a sample is drawn from a uniform distribution using the
respective interval bounds of the posterior draw as minimum and maximum.
The result is adistribution of consensus values from the respective
consensus interval, which is visualized in the plot. The argument
<code>CI</code> specifies the credible interval for the error bars.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_consensus.html">plot_consensus</a></span><span class="op">(</span><span class="va">fit</span>, method <span class="op">=</span> <span class="st">"draws_distribution"</span>, CI <span class="op">=</span> <span class="fl">.95</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/README-unnamed-chunk-11-1.png" alt="Plot of the estimated consensus intervals." width="90%"></p>
<p>Using twi CIs:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_consensus.html">plot_consensus</a></span><span class="op">(</span><span class="va">fit</span>, method <span class="op">=</span> <span class="st">"draws_distribution"</span>, CI <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.95</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/README-unnamed-chunk-12-1.png" alt="Plot of the estimated consensus intervals." width="90%"></p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthias Kloft, Björn S. Siepe.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
